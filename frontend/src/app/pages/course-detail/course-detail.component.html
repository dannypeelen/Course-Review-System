<div class="course-detail-container">
  <div class="breadcrumb">
    <a routerLink="/courses">‚Üê Back to Courses</a>
  </div>

  <div class="course-header">
    <div class="course-title-section">
      <h1 class="course-title">{{course.name}}</h1>
      <div class="course-meta">
        <span class="course-code">{{course.code}}</span>
        <span class="course-credits">{{course.credits}} Credits</span>
      </div>
    </div>
    <div class="course-rating">
      <div class="rating-score">
        4.5<span class="rating-max">/5</span>
      </div>      
      <div class="rating-count">124 reviews</div>
    </div>
  </div>

  <div class="course-content">
    <div class="main-section">
      <div class="info-card">
        <h2>Course Description</h2>
        <p>
          {{course.description}}
        </p>
      </div>

      <div class="info-card">
        <h2>Recent Reviews</h2>
        
        <div class="review-form" *ngIf="showReviewForm">
          <textarea 
            [(ngModel)]="reviewText" 
            [maxlength]="maxCharacters"
            placeholder="Share your experience with this course..."
            class="review-textarea"
            rows="6"
          ></textarea>
          <div class="review-form-footer">
            <span class="character-count" [class.text-danger]="remainingCharacters < 50">
              {{ remainingCharacters }} / {{ maxCharacters }} characters remaining
            </span>
            <div class="form-actions">
              <button class="btn btn-secondary" (click)="toggleReviewForm()">Cancel</button>
              <button 
                class="btn btn-primary" 
                (click)="submitReview()"
                [disabled]="reviewText.trim().length === 0"
              >
                Submit Review
              </button>
            </div>
          </div>
        </div>

        <div class="reviews-list">
          <div class="review-item" *ngFor="let review of reviews; let i = index" [hidden]="!showAllReviews && i >= 3">
            <div class="review-header">
              <div class="reviewer-info">
                <span class="review-date">{{ review.date }}</span>
              </div>
            </div>
            <p class="review-text">
              {{ review.text }}
            </p>
          </div>
        </div>
        
        <button class="btn btn-secondary view-more-btn" (click)="toggleReviews()" *ngIf="reviews.length > 3">
          {{ showAllReviews ? 'Show Less' : 'View More' }}
        </button>
      </div>
    </div>

    <div class="sidebar">
      <div class="info-card">
        <h3>Course Details</h3>
        <div class="detail-item">
          <span class="detail-label">Course Name:</span>
          <span class="detail-value">{{course.name}}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Course Code:</span>
          <span class="detail-value">{{course.code}}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Credits:</span>
          <span class="detail-value">{{course.credits}}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Instructor:</span>
          <span class="detail-value">{{course.professor}}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Department:</span>
          <span class="detail-value">Computer Science</span>
        </div>
      </div>

      <div class="info-card">
        <h3>Workload</h3>
        <div class="detail-item">
          <span class="detail-label">Difficulty (1-5)</span>
          <span class="detail-value">4.6</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Time Commitment (hours/week)</span>
          <span class="detail-value">7.2</span>
        </div>
        <div class="detail-item">
          <span class="detail-label"># Exams</span>
          <span class="detail-value">1.9</span>
        </div>
        <div class="detail-item">
          <span class="detail-label"># Projects</span>
          <span class="detail-value">3.3</span>
        </div>
      </div>

      <div class="action-card">
        <button class="btn btn-primary btn-full" (click)="toggleReviewForm()">Write a Review</button>
      </div>
    </div>
  </div>
</div>